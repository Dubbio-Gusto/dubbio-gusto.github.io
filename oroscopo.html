<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DUBBIOGUSTO — Oroscopo</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    :root{--bg:#f8f8f8;--muted:#555}
    body{margin:0;color:#222;padding-bottom:80px}
    .wrap{max-width:1100px;margin:0 auto;padding:18px;box-sizing:border-box}
    .header{text-align:center;padding:18px}
    h1{font-size:clamp(1.6rem,4vw,2.4rem);margin:.2rem 0}
    h2{font-size:clamp(1rem,3vw,1.25rem);margin:0;color:var(--muted);font-weight:400}
    .player{max-width:600px;margin:16px auto}
    .player iframe{width:100%;height:42px;border:0}
    .immagini{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;margin-top:18px}
    .immagini img{max-width:100%;height:auto;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.12)}
    
    /* Pulsante Homepage */
    .home-button-container{text-align:center;margin-top:40px;padding:20px;display:flex;flex-direction:column;gap:15px}
      .home-button-container .btn{max-width:300px;margin:0 auto;padding:20px 40px;font-size:1.1rem;width:100%;font-family:inherit}
    
    /* Dubbio Astrologico box */
    /* .reveal-area avvolge immagine + box: l'effetto blur si applica qui */
    .reveal-area{transition:filter 0.3s ease}
    .reveal-area.blur{filter:blur(8px);pointer-events:none}
    .dubbio-box{background:rgba(255,255,255,0.5);border:2px solid #14213d;border-radius:10px;padding:20px;margin:20px auto;max-width:500px;text-align:center;min-height:60px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;font-weight:600;color:#14213d}
    .dubbio-box.active{background:rgba(122,252,255,0.15);border-color:#7afcff;animation:pulse 0.5s ease-out}
    @keyframes pulse{0%{transform:scale(0.95);opacity:0.5}100%{transform:scale(1);opacity:1}}
    
    @media(min-width:700px){.immagini img{width:320px}}
    @media(max-width:600px){
      body{padding-bottom:100px}
      .wrap{padding:12px}
      .header{padding:12px}
      .home-button-container{margin-top:30px;padding:15px}
    }
    /* small fixed homepage button (same as prodotti.html) */
    .small-home{position:fixed;right:12px;bottom:36px;z-index:300;max-width:140px;padding:8px 12px;font-size:0.9rem;border-radius:8px;background:rgba(9,58,218,0.85);color:#fff;text-align:center;text-decoration:none;font-family:inherit}
    .small-home:hover{background:rgba(46,139,125,0.95)}
  </style>
</head>
<body data-page="oroscopo">
  <div class="wrap">
    <header class="header">
      <h1>ASTRODUBBIO</h1>
      <h2>Metti in dubbio il tuo segno</h2>
    </header>

    <div class="player">
      <iframe id="bandcamp-player" src="https://bandcamp.com/EmbeddedPlayer/album=4240241816/size=small/bgcol=ffffff/linkcol=0687f5/track=628322033/transparent=true/" seamless></iframe>
    </div>

    <div class="reveal-area blur">
      <div class="immagini">
        <img src="css/images/dgsa - 2.png" alt="Immagine locale 1">
      </div>

      <div class="dubbio-box" id="dubbio-output">???</div>
    </div>

    <div class="home-button-container">
      <button id="genera-dubbio" class="btn" style="cursor:pointer">GENERA DUBBIO ASTROLOGICO</button>
    </div>

    <footer style="text-align:center;margin-top:22px;color:#666">&copy; <span id="year"></span> DUBBIOGUSTO</footer>
  </div>

  <script>
    // Lista di dubbi astrologici
    const dubbi = [
      "Il tuo segno zodiacale è veramente quello che pensi?",
      "Che cos'è la retrogradazione di Mercurio se non una prova schiacciante della relatività generale?",
      "I tuoi avi stanno sabotando il tuo partner",
      "Credi che la luna abbia più influenza su te o tu su di lei?",
      "L'ultima volta che hai avuto un orgasmo non avresti dovuto",
      "Corri forte, la gente dice sei statx tu",
      "Il tuo tema natale è pieno di errori",
      "L'ultima volta che hai pianto non avresti dovuto",
      "Le fasi Lunari sanno davvero cosa vuoi dalla vita",
      "La prossima notte di luna nuova è meglio che tu abbia lo stomaco vuoto",
      "Il tuo elemento zodiacale non è tuo",
      "Se la luna è in vergine, lavati la faccia sennò non farlo fino alla prossima",
      "L'orologio del dottore che ha segnato la tua nascita era avanti di almeno 45 minuti",
      "Esisti anche quando non pensi purtroppo",
      "Esisti prima di quello che pensi",
    ];

    (function(){
      let used = false;
      // timer stored globally to allow clearing between clicks
      window.__dubbioBlurTimer = window.__dubbioBlurTimer || null;
      document.getElementById('genera-dubbio').addEventListener('click', function() {
        const output = document.getElementById('dubbio-output');
        const reveal = document.querySelector('.reveal-area');
        const message = used ? "BASTA CLICCARE!! UN DUBBIO TI BASTA E AVANZA PER ADESSO!" : dubbi[Math.floor(Math.random() * dubbi.length)];
        output.textContent = message;
        used = true;
        // mostra contenuto rimuovendo il blur sull'area che contiene immagine + box
        if (reveal) reveal.classList.remove('blur');
        output.classList.add('active');

        // ripristina il blur dopo 6 secondi (reset timer ad ogni click)
        if (window.__dubbioBlurTimer) clearTimeout(window.__dubbioBlurTimer);
        window.__dubbioBlurTimer = setTimeout(()=>{
          if (reveal) reveal.classList.add('blur');
        }, 6000);

        setTimeout(() => output.classList.remove('active'), 500);
      });
    })();

    document.getElementById('year').textContent = new Date().getFullYear();
    // prova a mettere in play il player dopo un'interazione
    document.addEventListener('click', ()=>{
      const iframe = document.getElementById('bandcamp-player');
      try{ iframe.contentWindow.postMessage({command:'play'},'*') }catch(e){/*non possibile*/}
    },{once:true});
  </script>
  <a href="index.html" class="small-home">Homepage</a>
</body>
</html>
