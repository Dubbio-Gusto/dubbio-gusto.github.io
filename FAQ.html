<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DOMANDE SCOMODE</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    :root{--bg:#0f0f17;--card:#0b1020;--accent1:#ff5c8a;--accent2:#7afcff}
    html,body{height:100%;margin:0;}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(122,252,255,.06), transparent),
                  radial-gradient(1000px 500px at 90% 90%, rgba(255,92,138,.04), transparent),
                  var(--bg);
      display:flex;align-items:center;justify-content:center;overflow:hidden;color:white
    }

    /* card */
    .stage{
      width:92vw;max-width:1120px;height:86vh;max-height:900px;border-radius:28px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
      box-shadow: 0 12px 70px rgba(0,0,0,.66), inset 0 1px 0 rgba(255,255,255,.02);display:grid;place-items:center;position:relative;overflow:hidden;padding:32px;
      transform-style:preserve-3d;backdrop-filter: blur(6px);
    }

    /* floating particles */
    .particle{position:absolute;border-radius:999px;opacity:.18;mix-blend-mode:screen;animation:drift 12s linear infinite}
    .p1{width:220px;height:220px;left:-60px;top:-40px;background:linear-gradient(45deg,var(--accent2),#3b82f6)}
    .p2{width:160px;height:160px;right:-40px;bottom:-60px;background:linear-gradient(45deg,var(--accent1),#f97316);animation-duration:16s}
    .p3{width:80px;height:80px;left:20%;bottom:10%;background:linear-gradient(45deg,#a78bfa,#60a5fa);opacity:.08;animation-duration:20s}
    @keyframes drift{0%{transform:translate3d(0,0,0) rotate(0deg)}50%{transform:translate3d(40px,-20px,20px) rotate(90deg)}100%{transform:translate3d(0,0,0) rotate(360deg)}}

    /* center art */
    .art{
      width:68vmin;height:68vmin;max-width:820px;max-height:820px;border-radius:18px;display:grid;place-items:center;position:relative;z-index:3;
      transform:rotateX(8deg) rotateY(-10deg) perspective(900px) translateZ(40px);
    }

    /* image (inline SVG) */
    .img-wrap{width:92%;height:92%;display:grid;place-items:center;border-radius:14px;background:linear-gradient(135deg, rgba(255,255,255,.02), rgba(0,0,0,.05));box-shadow: 0 6px 30px rgba(0,0,0,.45);cursor:pointer;transition:transform .35s cubic-bezier(.2,.9,.3,1)}
    .img-wrap:active{transform:scale(.96) rotate(-2deg)}

    svg{width:80%;height:80%;filter:drop-shadow(0 10px 28px rgba(0,0,0,.45));}

    /* crazy text */
    .crazy-text{position:absolute;bottom:28px;left:28px;font-weight:800;letter-spacing:2px;font-size:clamp(20px,4vmin,48px);z-index:6;display:flex;gap:.5ch}
    .crazy-text span{display:inline-block;transform-origin:center;animation:wiggle 4s ease-in-out infinite;}
    .crazy-text span:nth-child(odd){animation-duration:3.6s}
    .crazy-text span:nth-child(even){animation-duration:4.3s}
    @keyframes wiggle{0%{transform:translateY(0) rotate(0deg) scale(1)}25%{transform:translateY(-6px) rotate(-4deg) scale(1.03)}50%{transform:translateY(0) rotate(2deg) scale(.98)}75%{transform:translateY(6px) rotate(4deg) scale(1.02)}100%{transform:translateY(0) rotate(0deg) scale(1)}}

    /* glitch overlay */
    .glitch{position:absolute;inset:0;z-index:5;pointer-events:none;mix-blend-mode:overlay;opacity:.18;background-image:repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0 1px, transparent 1px 6px)}

    /* small instructions bubble */
    .hint{position:absolute;top:16px;right:16px;background:rgba(0,0,0,.28);padding:8px 12px;border-radius:999px;font-size:13px;border:1px solid rgba(255,255,255,.04);backdrop-filter: blur(4px);z-index:8}

    /* confetti (will be created by JS) */
    .confetti{pointer-events:none;position:absolute;inset:0;z-index:20}

    /* neon halo on hover */\    
    .img-wrap:hover{box-shadow:0 30px 80px rgba(122,252,255,.08), 0 6px 28px rgba(255,92,138,.06);transform:translateY(-6px) rotate(1deg) scale(1.02)}

    /* responsive */
    @media (max-width:720px){.stage{border-radius:18px;padding:14px}.crazy-text{font-size:clamp(14px,3.4vmin,28px);left:14px;bottom:12px}}
    /* local overrides: rendi il pulsante home molto piu' piccolo su questa pagina */
    .right-panel .buttons .small-home{padding:6px 10px;font-size:0.85rem;max-width:120px;background:rgba(255,255,255,0.06);border-radius:8px}
    @media (max-width:720px){ .right-panel .buttons .small-home{max-width:110px;padding:6px 8px} }
  </style>
</head>
<body data-page="faq">
  <div class="stage" id="stage">
    <div class="particle p1"></div>
    <div class="particle p2"></div>
    <div class="particle p3"></div>

    <div class="art">
      <div class="img-wrap" id="imgWrap" title="Cliccami per esplodere in gioia!">
        <!-- immagine locale -->
        <img src="./css/images/DG_logo.png" alt="stomale" style="width:92%;height:92%;object-fit:cover;border-radius:14px;filter:drop-shadow(0 8px 22px rgba(0,0,0,.45));" />
      </div>
    </div>

    <div class="glitch" aria-hidden="true"></div>

    <div class="crazy-text" id="crazyText" aria-label="DUBBIO GIUSTO IN SPAZIO NOSTRO">
      <!-- each letter animated separately -->
      <span style="color:var(--accent2)">D</span>
      <span style="color:var(--accent1)">U</span>
      <span style="color:#fff68f">B</span>
      <span style="color:#7afcff">B</span>
      <span style="color:#ffd6e0">B</span>
      <span style="color:#bdb2ff">!</span>
            <span style="color:#bdb2ff">0</span>
      <span style="color:#bdb2ff">G</span>
      <span style="color:#bdb2ff">U</span>
      <span style="color:#bdb2ff">S</span>
      <span style="color:#bdb2ff">T</span>
      <span style="color:#bdb2ff">O</span>

    </div>

    <div class="hint">SCUOTITI ðŸŽ‰</div>

    <canvas class="confetti" id="confettiCanvas"></canvas>
  </div>

  <script>
    // piccolo script per esplosione di coriandoli e reattivitÃ  del testo
    const wrap = document.getElementById('imgWrap');
    const canvas = document.getElementById('confettiCanvas');
    const stage = document.getElementById('stage');
    canvas.width = stage.clientWidth; canvas.height = stage.clientHeight;
    let ctx = canvas.getContext('2d');

    // create simple confetti
    function makeConfetti(x,y){
      const pieces = [];
      for(let i=0;i<90;i++){
        pieces.push({x,y, vx:(Math.random()-0.5)*10, vy:(Math.random()*-8)-2, r: (Math.random()*6)+3, ttl:Math.random()*90+60, hue:Math.floor(Math.random()*360)});
      }
      return pieces;
    }

    let confetti = [];
    function updateConfetti(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let i=confetti.length-1;i>=0;i--){
        const p = confetti[i];
        p.vy += 0.35; p.x += p.vx; p.y += p.vy; p.ttl--;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.ttl*0.02);
        ctx.fillStyle = 'hsl('+p.hue+',80%,'+(50 - Math.min(25, p.ttl/4))+'%)';
        ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*1.6);
        ctx.restore();
        if(p.ttl<=0 || p.y>canvas.height+60) confetti.splice(i,1);
      }
      requestAnimationFrame(updateConfetti);
    }
    updateConfetti();

    // on click: spawn confetti and do a small text scramble
    wrap.addEventListener('click', (e)=>{
      const rect = stage.getBoundingClientRect();
      confetti.push(...makeConfetti(rect.width/2 + (Math.random()-0.5)*80, rect.height/2 + (Math.random()-0.5)*30));
      scrambleText();
      pulseArt();
    });

    // scramble letters: quick random jitter + color pop
    function scrambleText(){
      const spans = document.querySelectorAll('#crazyText span');
      spans.forEach((s,i)=>{
        s.style.transition='transform .6s cubic-bezier(.2,.9,.3,1), color .4s';
        s.style.transform = `translate3d(${(Math.random()-0.5)*36}px, ${(Math.random()-0.5)*36}px, 0) rotate(${(Math.random()-0.5)*60}deg) scale(${1+Math.random()*.28})`;
        s.style.color = `hsl(${Math.floor(Math.random()*360)},80%,65%)`;
        setTimeout(()=>{ s.style.transform=''; s.style.color=''; }, 800 + Math.random()*600);
      });
    }

    // pulse art
    function pulseArt(){
      const art = document.querySelector('.art');
      art.animate([
        {transform: 'rotateX(8deg) rotateY(-10deg) translateZ(40px) scale(1)'},
        {transform: 'rotateX(0deg) rotateY(0deg) translateZ(80px) scale(1.06)'},
        {transform: 'rotateX(8deg) rotateY(-10deg) translateZ(40px) scale(1)'}
      ],{duration:900, easing:'cubic-bezier(.2,.9,.3,1)'});
    }

    // shake-to-explode: listen to key 's' for demo (no device motion here)
    window.addEventListener('keydown', (e)=>{ if(e.key==='s'){ const r=stage.getBoundingClientRect(); confetti.push(...makeConfetti(r.width/2,r.height/2)); scrambleText(); } });

    // resize canvas on window resize
    new ResizeObserver(()=>{ canvas.width = stage.clientWidth; canvas.height = stage.clientHeight; }).observe(stage);

    // tiny mouse parallax
    stage.addEventListener('mousemove', (e)=>{
      const r = stage.getBoundingClientRect();
      const mx = (e.clientX - r.left)/r.width - 0.5;
      const my = (e.clientY - r.top)/r.height - 0.5;
      document.querySelector('.art').style.transform = `rotateX(${8 - my*18}deg) rotateY(${ -10 - mx*30}deg) perspective(900px) translateZ(40px)`;
    });
    stage.addEventListener('mouseleave', ()=>{ document.querySelector('.art').style.transform = 'rotateX(8deg) rotateY(-10deg) perspective(900px) translateZ(40px)'; });

    // playful accessibility: announce on click
    wrap.addEventListener('click', ()=>{ if ('speechSynthesis' in window){ const u = new SpeechSynthesisUtterance('Boom! Festa di coriandoli!'); speechSynthesis.cancel(); speechSynthesis.speak(u); } });

  </script>
  <aside class="right-panel">
    <div class="buttons">
      <a href="index.html" class="btn small-home">Homepage</a>
    </div>
  </aside>
</body>
</html>
